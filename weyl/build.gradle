import io.quartic.gradle.kotlin.KotlinPlugin
import io.quartic.gradle.service.ServicePlugin

plugins {
    id "com.palantir.configuration-resolver" version "0.2.0"
}

apply plugin: KotlinPlugin
apply plugin: ServicePlugin

service {
    mainClassName = "io.quartic.weyl.WeylApplication"
    memory = System.env.WEYL_MEMORY ?: "8g"
}

dependencies {
    compile project(":common-application")
    compile project(":catalogue-api")
    compile project(":weyl-core")
    if (System.env.SKIP_FRONTEND == null) {
        compile project(":weyl-frontend")
    }

    compile "org.glassfish.tyrus:tyrus-container-grizzly-client:1.13"
    compile "io.dropwizard:dropwizard-jdbi:${versions.dropwizard}"
    compile "io.dropwizard:dropwizard-assets:${versions.dropwizard}"
    compile libraries.dropwizardWebsockets

    testCompile project(":common-test")
    testCompile libraries.testCommon
    testCompile "io.dropwizard:dropwizard-testing:${versions.dropwizard}"
}
