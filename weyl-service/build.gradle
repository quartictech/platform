plugins {
    id 'org.inferred.processors' version '1.2.3'
}
apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'idea'

dependencies {
  compile project(':weyl-core')
  compile 'io.dropwizard:dropwizard-core:' + dropwizardVersion
  compile 'io.dropwizard:dropwizard-jdbi:' + dropwizardVersion
  compile 'io.dropwizard:dropwizard-assets:' + dropwizardVersion
  compile 'no.ecc.vectortile:java-vector-tile:' + vectorTileVersion
  compile 'org.postgresql:postgresql:9.4.1209'
  compile 'org.apache.commons:commons-io:1.3.2'
  processor 'org.immutables:value:2.2.10'

  testCompile 'junit:junit:4.12'
  testCompile 'org.hamcrest:hamcrest-all:1.3'
  testCompile 'org.mockito:mockito-core:1.10.19'
}

mainClassName = 'io.quartic.weyl.WeylApplication'


ext.memorySetting = (project.hasProperty('memory') ? project.memory : '8g')

run {
  args = ['server', 'weyl.yml']
  jvmArgs = ["-Xms${memorySetting}", "-Xmx${memorySetting}", '-XX:+PrintGCDetails', '-XX:+PrintGCDateStamps', '-Xloggc:mygclogfilename.gc']
}
